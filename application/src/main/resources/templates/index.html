<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>欢迎访问C-PLATFORM（集成开发平台）</title>
</head>

<!--import css-->
<link rel="stylesheet" href="/css/element-index.css">
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/font-awesome.min.css">
<!--import js-->
<script src="/js/vue.min.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/element-index.js"></script>

<body>
<div id="app">
    <el-container style="height: 100%">
        <el-header class="el-header">
            <div  class="header-logo">
                <i class="el-icon-s-platform"></i>
                C-PLATFORM
            </div>
            <div class="header-collapse">
                <div style="cursor: pointer">
                    <el-tooltip effect="light" content="收起" placement="bottom" v-if="isCollapse" >
                        <i class="el-icon-d-arrow-right" @click="setCollapseToClose()"></i>
                    </el-tooltip>
                    <el-tooltip effect="light" content="展开" placement="bottom" v-if="!isCollapse">
                        <i class="el-icon-d-arrow-left"  @click="isCollapse=!isCollapse"></i>
                    </el-tooltip>
                </div>
                <div style="cursor: pointer">

                </div>
            </div>
            <el-row class="header-right">
                <el-col :span="12">
                    <div class="header-right-content">
                        <div style="cursor: pointer;display: inline-block">
                            <el-tooltip effect="light" content="全屏" placement="bottom">
                                <i class="el-icon-full-screen" @click="handleFullScreenChange()"></i>
                            </el-tooltip>
                            <el-tooltip style="margin-left: 20px" effect="light" content="通知" placement="bottom">
                                <i class="el-icon-message-solid"></i>
                            </el-tooltip>
                        </div>
                    </div>
                </el-col>
                <el-col :span="10">
                    <div class="header-right-user">
                        <img src="/img/img.jpg" class="header-right-user-img">
                        <div class="header-right-user-text">
                            <el-dropdown @command="handleCommand" trigger="click" class="header-right-user-dropdown">
                                <span class="el-dropdown-link">
                                    admin<i class="el-icon-arrow-down el-icon--right"></i>
                                </span>
                                <el-dropdown-menu slot="dropdown">
                                    <el-dropdown-item command="toLogin">退出登录</el-dropdown-item>
                                </el-dropdown-menu>
                            </el-dropdown>
                        </div>
                    </div>
                </el-col>
            </el-row>
        </el-header>
        <el-container>
            <!--菜单项开始-->
            <el-menu background-color="#324157"
                     text-color="#bfcbd9"
                     active-text-color="#20a0ff"
                     :collapse="isCollapse"
                     collapse-transition="false"
                     class="el-menu-vertical-demo"
                     style="border-right-width: 0;">
                <el-submenu :index="menu.orderNum+1" v-for="menu in menuList">
                    <template slot="title">
                        <i v-if="menu.icon != null" :class="menu.icon"></i>
                        <i v-else class="fa fa-bars"></i>
                        <span slot="title">{{menu.menuName}}</span>
                    </template>
                    <el-menu-item-group v-for="subMenu in menu.subMenuList">
                        <el-menu-item :index="menu.orderNum+'-'+subMenu.orderNum">{{subMenu.menuName}}</el-menu-item>
                    </el-menu-item-group>
                    <!--<el-menu-item-group>-->
                        <!--<el-menu-item index="1-3">选项3</el-menu-item>-->
                    <!--</el-menu-item-group>-->
                    <!--<el-submenu index="1-4">-->
                        <!--<span slot="title">选项4</span>-->
                        <!--<el-menu-item index="1-4-1">选项1</el-menu-item>-->
                    <!--</el-submenu>-->
                </el-submenu>
            </el-menu>
            <!--菜单项结束-->
            <el-container style="background-color: #F5F5F5">
                <el-main>
                    <!--面包屑开始-->
                    <el-card class="box-card">
                        <el-breadcrumb separator="/">
                            <el-breadcrumb-item :to="{ path: '/' }">首页</el-breadcrumb-item>
                            <el-breadcrumb-item>菜单项1</el-breadcrumb-item>
                            <el-breadcrumb-item>菜单项2</el-breadcrumb-item>
                            <el-breadcrumb-item>菜单项3</el-breadcrumb-item>
                        </el-breadcrumb>
                    </el-card>
                    <!--面包屑结束-->
                    <!--主体内容开始-->
                    <el-card class="box-card main-content" >
                        主体内容
                    </el-card>
                    <!--主体内容结束-->
                </el-main>
                <el-footer>
                    <div class="footer">
                        欢迎使用C-PLATFROM&copy;
                    </div>
                </el-footer>
            </el-container>
        </el-container>
    </el-container>
</div>
</body>

<script>
    var vm = new Vue({
        el: '#app',
        data: function () {
            return {
                isCollapse: false,  //是否折叠侧边菜单栏
                isFullScreen: false,    //是否全屏显示
                menuList: []      //菜单列表
            }
        },
        methods: {
            handleCommand: function (command) {
                if(command == "toLogin"){
                    location.href = "/login"
                }
            },
            handleOpen(key, keyPath) {
                console.log(key, keyPath);
            },
            handleClose(key, keyPath) {
                console.log(key, keyPath);
            },
            setCollapseToClose: function () {
                this.isCollapse = !this.isCollapse
                $("el-aside").hide()
                $("el-aside").css('width','60px')
            },
            handleFullScreenChange: function () {
                var element = document.documentElement;
                if(this.isFullScreen){
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    } else if (document.webkitCancelFullScreen) {
                        document.webkitCancelFullScreen();
                    } else if (document.mozCancelFullScreen) {
                        document.mozCancelFullScreen();
                    } else if (document.msExitFullscreen) {
                        document.msExitFullscreen();
                    }
                }else{
                    if (element.requestFullscreen) {
                        element.requestFullscreen();
                    } else if (element.webkitRequestFullScreen) {
                        element.webkitRequestFullScreen();
                    } else if (element.mozRequestFullScreen) {
                        element.mozRequestFullScreen();
                    } else if (element.msRequestFullscreen) {
                        // IE11
                        element.msRequestFullscreen();
                    }
                }
                this.isFullScreen = !this.isFullScreen
            }
        },
        created: function () {

        },
        mounted: function () {
            var _this = this
            $.get('/sys_menu/menu_tree',function (resp) {
                if(resp.resultCode == "0"){
                    _this.menuList = resp.data
                    console.log(resp)
                }
            })
        },
        computed: {}
    })
</script>


</html>